(()=>{"use strict";(()=>{let e="metric",t="toronto";const o=document.querySelector("#searchInput"),n=document.querySelector("#btnSearch"),r=document.querySelector("#btnChangeUnit"),c=document.querySelector("#errorInput"),i=async o=>{try{let n=await(async e=>{try{const t=await fetch(e,{mode:"cors"}),o=await t.json();console.log(o);const n={};return n.city=o.name,n.country=o.sys.country,n.lat=o.coord.lat,n.lon=o.coord.lon,console.log("currentDataObj"),n}catch(e){console.log("error: "+e)}})(`https://api.openweathermap.org/data/2.5/weather?q=${o}&units=${e}&APPID=107629179ef66f70931a8e42d89f5115`),r=await(async e=>{try{const t=await fetch(e,{mode:"cors"}),o=await t.json();console.log(o);const n={};return n.temp=o.current.temp,n.description=o.current.weather[0].description,n.iconCode=o.current.weather[0].icon,n.feelsLike=o.current.feels_like,n.humidity=o.current.humidity,n.windSpeed=o.current.wind_speed,n.daily=o.daily,n.daily.shift(),n}catch(e){console.log("error: "+e)}})(`https://api.openweathermap.org/data/2.5/onecall?lat=${n.lat}&lon=${n.lon}&units=${e}&appid=107629179ef66f70931a8e42d89f5115`);console.log(n),console.log(r),r.city=n.city,r.country=n.country,console.log(r),t=n.city,((e,t)=>{let o="",n="";"metric"==t?(o="°C",n="km/h"):"imperial"==t&&(o="°F",n="mph");const r=document.querySelector("#weatherLocation"),c=document.querySelector("#weatherDescription"),i=document.querySelector("#weatherTemp"),a=document.querySelector("#weatherIcon");var l;r.innerHTML=`${e.city}, ${e.country}`,c.innerHTML=`${l=e.description,l.replace(/(^\w{1})|(\s+\w{1})/g,(e=>e.toUpperCase()))}`,i.innerHTML=`${Math.round(e.temp)} ${o}`,a.src=`http://openweathermap.org/img/wn/${e.iconCode}@4x.png`;const d=document.querySelector("#feelsLikeTemp"),u=document.querySelector("#humidityTemp"),s=document.querySelector("#windSpeedTemp");d.innerHTML=`${Math.round(e.feelsLike)} ${o}`,u.innerHTML=`${e.humidity}%`,s.innerHTML=`${Math.round(10*e.windSpeed)/10} ${n}`;const y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];e.daily.forEach(((e,t)=>{console.log(e),console.log(t),console.log(e.dt);let n=new Date(1e3*e.dt),r=y[n.getDay()];console.log(r);const c=document.querySelector(`#day${t}Name`),i=document.querySelector(`#day${t}High`),a=document.querySelector(`#day${t}Low`),l=document.querySelector(`#day${t}Icon`);c.innerHTML=`${r}`,i.innerHTML=`${Math.round(e.temp.max)} ${o}`,a.innerHTML=`${Math.round(e.temp.min)} ${o}`,l.src=`http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}))})(r,e),c.style.visibility="hidden"}catch(e){console.log("error: "+e),c.style.visibility="visible"}};i("toronto"),n.addEventListener("click",(()=>{console.log(o.value),i(o.value),o.value=""})),o.addEventListener("keypress",(function(e){"Enter"===e.key&&(i(o.value),o.value="")})),r.addEventListener("click",(function(o){const n=document.querySelector("#metricLabel"),r=document.querySelector("#imperialLabel");"metric"==e?(e="imperial",n.style.fontWeight="normal",r.style.fontWeight="bold"):"imperial"==e&&(e="metric",n.style.fontWeight="bold",r.style.fontWeight="normal"),i(t)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvYXBpLmpzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvZG9tLmpzIl0sIm5hbWVzIjpbInVuaXRzIiwiY3VyckNpdHkiLCJzZWFyY2hJbnB1dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNlYXJjaEJ0biIsImJ0bkNoYW5nZVVuaXQiLCJlcnJvcklucHV0IiwiZ2V0RGF0YSIsImFzeW5jIiwic2VhcmNoVmFsdWUiLCJjdXJyZW50RGF0YSIsInVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50RGF0YU9iaiIsImNpdHkiLCJuYW1lIiwiY291bnRyeSIsInN5cyIsImxhdCIsImNvb3JkIiwibG9uIiwiZXJyb3IiLCJjdXJyZW50V2VhdGhlckFQSSIsIm9uZUNhbGxEYXRhIiwib25lQ2FsbERhdGFPYmoiLCJ0ZW1wIiwiY3VycmVudCIsImRlc2NyaXB0aW9uIiwid2VhdGhlciIsImljb25Db2RlIiwiaWNvbiIsImZlZWxzTGlrZSIsImZlZWxzX2xpa2UiLCJodW1pZGl0eSIsIndpbmRTcGVlZCIsIndpbmRfc3BlZWQiLCJkYWlseSIsInNoaWZ0Iiwib25lQ2FsbEFQSSIsIndlYXRoZXJPYmoiLCJkZWdyZWVzIiwic3BlZWQiLCJ3ZWF0aGVyTG9jYXRpb24iLCJ3ZWF0aGVyRGVzY3JpcHRpb24iLCJ3ZWF0aGVyVGVtcCIsIndlYXRoZXJJY29uIiwic3RyaW5nIiwiaW5uZXJIVE1MIiwicmVwbGFjZSIsImxldHRlciIsInRvVXBwZXJDYXNlIiwiTWF0aCIsInJvdW5kIiwic3JjIiwiZmVlbHNMaWtlVGVtcCIsImh1bWlkaXR5VGVtcCIsIndpbmRTcGVlZFRlbXAiLCJhbGxEYXlzIiwiZm9yRWFjaCIsImRheSIsImluZGV4IiwiZHQiLCJkYXRlVGltZSIsIkRhdGUiLCJjb252RGF5TmFtZSIsImdldERheSIsImRheU5hbWUiLCJkYXlIaWdoIiwiZGF5TG93IiwiZGF5SWNvbiIsIm1heCIsIm1pbiIsImxvYWRXZWF0aGVyRGF0YSIsInN0eWxlIiwidmlzaWJpbGl0eSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ2YWx1ZSIsImUiLCJrZXkiLCJtZXRyaWNMYWJlbCIsImltcGVyaWFsTGFiZWwiLCJmb250V2VpZ2h0Il0sIm1hcHBpbmdzIjoibUJBSXVCLE1BQ25CLElBQUlBLEVBQVEsU0FDUkMsRUFBVyxVQUNmLE1BQU1DLEVBQWNDLFNBQVNDLGNBQWMsZ0JBQ3JDQyxFQUFZRixTQUFTQyxjQUFjLGNBQ25DRSxFQUFnQkgsU0FBU0MsY0FBYyxrQkFDdkNHLEVBQWFKLFNBQVNDLGNBQWMsZUFFcENJLEVBQVVDLE1BQU9DLElBQ25CLElBQ0ksSUFBSUMsT0NkVUYsT0FBT0csSUFDN0IsSUFDSSxNQUFNQyxRQUFpQkMsTUFBTUYsRUFBSyxDQUFDRyxLQUFNLFNBQ25DSixRQUFvQkUsRUFBU0csT0FDbkNDLFFBQVFDLElBQUlQLEdBQ1osTUFBTVEsRUFBaUIsR0FNdkIsT0FMQUEsRUFBZUMsS0FBT1QsRUFBWVUsS0FDbENGLEVBQWVHLFFBQVVYLEVBQVlZLElBQUlELFFBQ3pDSCxFQUFlSyxJQUFNYixFQUFZYyxNQUFNRCxJQUN2Q0wsRUFBZU8sSUFBTWYsRUFBWWMsTUFBTUMsSUFDdkNULFFBQVFDLElBQUksa0JBQ0xDLEVBQ1QsTUFBT1EsR0FDTFYsUUFBUUMsSUFBSSxVQUFVUyxLRENNQyxDQUFrQixxREFBcURsQixXQUFxQlYsNENBQ2hINkIsT0NHR3BCLE9BQU9HLElBQ3RCLElBQ0ksTUFBTUMsUUFBaUJDLE1BQU1GLEVBQUssQ0FBQ0csS0FBTSxTQUNuQ2MsUUFBb0JoQixFQUFTRyxPQUNuQ0MsUUFBUUMsSUFBSVcsR0FDWixNQUFNQyxFQUFpQixHQVd2QixPQVZBQSxFQUFlQyxLQUFPRixFQUFZRyxRQUFRRCxLQUMxQ0QsRUFBZUcsWUFBY0osRUFBWUcsUUFBUUUsUUFBUSxHQUFHRCxZQUM1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UUMsSUFBSWhCLEVBQVlnRixPQUN4QjFFLEVBQVFOLEVBQVlnRixPQUNwQmhGLEVBQVlnRixNQUFNLE1BR3RCaEYsRUFBWStFLGlCQUFpQixZQUFZLFNBQVVFLEdBQ2xDLFVBQVRBLEVBQUVDLE1BQ0Y1RSxFQUFRTixFQUFZZ0YsT0FDcEJoRixFQUFZZ0YsTUFBTSxPQUkxQjVFLEVBQWMyRSxpQkFBaUIsU0FBUyxTQUFTRSxHQUU3QyxNQUFNRSxFQUFjbEYsU0FBU0MsY0FBYyxnQkFDckNrRixFQUFnQm5GLFNBQVNDLGNBQWMsa0JBQ2xDLFVBQVBKLEdBQ0FBLEVBQVEsV0FDUnFGLEVBQVlOLE1BQU1RLFdBQVcsU0FDN0JELEVBQWNQLE1BQU1RLFdBQVcsUUFDakIsWUFBUHZGLElBQ1BBLEVBQVEsU0FDUnFGLEVBQVlOLE1BQU1RLFdBQVcsT0FDN0JELEVBQWNQLE1BQU1RLFdBQVcsVUFHbkMvRSxFQUFRUCxPQS9ETyxJIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2N1cnJlbnRXZWF0aGVyQVBJLCBvbmVDYWxsQVBJIH0gZnJvbSAnLi9hcGkuanMnO1xuaW1wb3J0IHtsb2FkV2VhdGhlckRhdGF9IGZyb20gJy4vZG9tLmpzJztcblxuXG5jb25zdCBzaXRlQ29udHJvbGxlciA9ICgoKT0+e1xuICAgIGxldCB1bml0cyA9ICdtZXRyaWMnO1xuICAgIGxldCBjdXJyQ2l0eSA9ICd0b3JvbnRvJztcbiAgICBjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2hJbnB1dCcpO1xuICAgIGNvbnN0IHNlYXJjaEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidG5TZWFyY2gnKTtcbiAgICBjb25zdCBidG5DaGFuZ2VVbml0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J0bkNoYW5nZVVuaXQnKTtcbiAgICBjb25zdCBlcnJvcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Vycm9ySW5wdXQnKTtcblxuICAgIGNvbnN0IGdldERhdGEgPSBhc3luYyAoc2VhcmNoVmFsdWUpID0+e1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICBsZXQgY3VycmVudERhdGEgPSBhd2FpdCBjdXJyZW50V2VhdGhlckFQSShgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/cT0ke3NlYXJjaFZhbHVlfSZ1bml0cz0ke3VuaXRzfSZBUFBJRD0xMDc2MjkxNzllZjY2ZjcwOTMxYThlNDJkODlmNTExNWApO1xuICAgICAgICAgICAgbGV0IG9uZUNhbGxEYXRhID0gYXdhaXQgb25lQ2FsbEFQSShgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L29uZWNhbGw/bGF0PSR7Y3VycmVudERhdGEubGF0fSZsb249JHtjdXJyZW50RGF0YS5sb259JnVuaXRzPSR7dW5pdHN9JmFwcGlkPTEwNzYyOTE3OWVmNjZmNzA5MzFhOGU0MmQ4OWY1MTE1YCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50RGF0YSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhvbmVDYWxsRGF0YSk7XG4gICAgICAgICAgICBvbmVDYWxsRGF0YS5jaXR5ID0gY3VycmVudERhdGEuY2l0eTtcbiAgICAgICAgICAgIG9uZUNhbGxEYXRhLmNvdW50cnkgPSBjdXJyZW50RGF0YS5jb3VudHJ5O1xuICAgICAgICAgICAgY29uc29sZS5sb2cob25lQ2FsbERhdGEpO1xuICAgICAgICAgICAgY3VyckNpdHkgPSBjdXJyZW50RGF0YS5jaXR5O1xuICAgICAgICAgICAgbG9hZFdlYXRoZXJEYXRhKG9uZUNhbGxEYXRhLCB1bml0cyk7XG4gICAgICAgICAgICBlcnJvcklucHV0LnN0eWxlLnZpc2liaWxpdHk9J2hpZGRlbic7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcjogJytlcnJvcik7XG4gICAgICAgICAgICBlcnJvcklucHV0LnN0eWxlLnZpc2liaWxpdHk9J3Zpc2libGUnO1xuICAgICAgICAgICAgLy8gYWRkIGVycm9yIG1lc3NhZ2UgdW5kZXIgc2VhcmNoIGJhclxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuICAgIC8vIGluaXRpYWxpemUgc2l0ZSB3aXRoICd0b3JvbnRvJyBhcyBiYXNlIGNpdHlcblxuICAgIGNvbnN0IHNpdGVJbml0ID0gKCgpPT57XG4gICAgICAgIGdldERhdGEoJ3Rvcm9udG8nKTtcbiAgICB9KSgpO1xuICAgIFxuICAgIC8vIHNlYXJjaCBiYXIgZXZlbnQgbGlzdGVuZXJzXG5cbiAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICBjb25zb2xlLmxvZyhzZWFyY2hJbnB1dC52YWx1ZSk7XG4gICAgICAgIGdldERhdGEoc2VhcmNoSW5wdXQudmFsdWUpO1xuICAgICAgICBzZWFyY2hJbnB1dC52YWx1ZT0nJztcbiAgICB9KTtcblxuICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpe1xuICAgICAgICBpZiAoZS5rZXkgPT09J0VudGVyJyl7XG4gICAgICAgICAgICBnZXREYXRhKHNlYXJjaElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIHNlYXJjaElucHV0LnZhbHVlPScnO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBidG5DaGFuZ2VVbml0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG4gICAgICAgIC8vIGNoYW5nZSB0byBvcHBvc2l0ZSB1bml0XG4gICAgICAgIGNvbnN0IG1ldHJpY0xhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21ldHJpY0xhYmVsJyk7XG4gICAgICAgIGNvbnN0IGltcGVyaWFsTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW1wZXJpYWxMYWJlbCcpO1xuICAgICAgICBpZiAodW5pdHM9PSdtZXRyaWMnKXtcbiAgICAgICAgICAgIHVuaXRzID0gJ2ltcGVyaWFsJztcbiAgICAgICAgICAgIG1ldHJpY0xhYmVsLnN0eWxlLmZvbnRXZWlnaHQ9J25vcm1hbCc7XG4gICAgICAgICAgICBpbXBlcmlhbExhYmVsLnN0eWxlLmZvbnRXZWlnaHQ9J2JvbGQnO1xuICAgICAgICB9IGVsc2UgaWYgKHVuaXRzPT0naW1wZXJpYWwnKXtcbiAgICAgICAgICAgIHVuaXRzID0gJ21ldHJpYyc7XG4gICAgICAgICAgICBtZXRyaWNMYWJlbC5zdHlsZS5mb250V2VpZ2h0PSdib2xkJztcbiAgICAgICAgICAgIGltcGVyaWFsTGFiZWwuc3R5bGUuZm9udFdlaWdodD0nbm9ybWFsJztcbiAgICAgICAgfVxuICAgICAgICAvLyBjYWxsIGdldERhdGEgdXNpbmcgY3VyckNpdHkgdG8gcmUtZGlzcGxheSBpbiBuZXcgdW5pdHNcbiAgICAgICAgZ2V0RGF0YShjdXJyQ2l0eSk7XG4gICAgfSk7XG5cbn0pKCk7XG5cbiIsImNvbnN0IGN1cnJlbnRXZWF0aGVyQVBJID0gYXN5bmMgKHVybCkgPT4ge1xuICAgIHRyeXtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHttb2RlOiAnY29ycyd9KTtcbiAgICAgICAgY29uc3QgY3VycmVudERhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnREYXRhKTtcbiAgICAgICAgY29uc3QgY3VycmVudERhdGFPYmogPSB7fTtcbiAgICAgICAgY3VycmVudERhdGFPYmouY2l0eSA9IGN1cnJlbnREYXRhLm5hbWU7XG4gICAgICAgIGN1cnJlbnREYXRhT2JqLmNvdW50cnkgPSBjdXJyZW50RGF0YS5zeXMuY291bnRyeTtcbiAgICAgICAgY3VycmVudERhdGFPYmoubGF0ID0gY3VycmVudERhdGEuY29vcmQubGF0O1xuICAgICAgICBjdXJyZW50RGF0YU9iai5sb24gPSBjdXJyZW50RGF0YS5jb29yZC5sb247XG4gICAgICAgIGNvbnNvbGUubG9nKCdjdXJyZW50RGF0YU9iaicpO1xuICAgICAgICByZXR1cm4gY3VycmVudERhdGFPYmo7XG4gICAgfSBjYXRjaCAoZXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3I6ICcrZXJyb3IpO1xuICAgICAgICAvLyBzaG93IGVycm9yIG1lc3NhZ2Ugb25cbiAgICB9XG59XG5cbmNvbnN0IG9uZUNhbGxBUEkgPSBhc3luYyAodXJsKSA9PntcbiAgICB0cnl7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7bW9kZTogJ2NvcnMnfSk7XG4gICAgICAgIGNvbnN0IG9uZUNhbGxEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zb2xlLmxvZyhvbmVDYWxsRGF0YSk7XG4gICAgICAgIGNvbnN0IG9uZUNhbGxEYXRhT2JqID0ge307XG4gICAgICAgIG9uZUNhbGxEYXRhT2JqLnRlbXAgPSBvbmVDYWxsRGF0YS5jdXJyZW50LnRlbXA7XG4gICAgICAgIG9uZUNhbGxEYXRhT2JqLmRlc2NyaXB0aW9uID0gb25lQ2FsbERhdGEuY3VycmVudC53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uO1xuICAgICAgICBvbmVDYWxsRGF0YU9iai5pY29uQ29kZSA9IG9uZUNhbGxEYXRhLmN1cnJlbnQud2VhdGhlclswXS5pY29uO1xuICAgICAgICBvbmVDYWxsRGF0YU9iai5mZWVsc0xpa2UgPSBvbmVDYWxsRGF0YS5jdXJyZW50LmZlZWxzX2xpa2U7XG4gICAgICAgIG9uZUNhbGxEYXRhT2JqLmh1bWlkaXR5ID0gb25lQ2FsbERhdGEuY3VycmVudC5odW1pZGl0eTtcbiAgICAgICAgb25lQ2FsbERhdGFPYmoud2luZFNwZWVkID0gb25lQ2FsbERhdGEuY3VycmVudC53aW5kX3NwZWVkO1xuICAgICAgICAvLyByZW1lbWJlciB0byBpbmNsdWRlIHZhbHVlcyBmb3IgZGFpbHkgc3R1ZmZcbiAgICAgICAgb25lQ2FsbERhdGFPYmouZGFpbHkgPSBvbmVDYWxsRGF0YS5kYWlseTtcbiAgICAgICAgLy8gcmVtb3ZlcyB0aGUgZmlyc3QgZGF5IGZyb20gZGFpbHksIHdoaWNoIGlzIHRvZGF5J3Mgd2VhdGhlclxuICAgICAgICBvbmVDYWxsRGF0YU9iai5kYWlseS5zaGlmdCgpO1xuICAgICAgICByZXR1cm4gb25lQ2FsbERhdGFPYmo7XG4gICAgfWNhdGNoIChlcnJvcil7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcjogJytlcnJvcik7XG4gICAgfVxufVxuXG5leHBvcnQgeyBjdXJyZW50V2VhdGhlckFQSSwgb25lQ2FsbEFQSX0iLCJjb25zdCBjYXBpdGFsaXplU3RyID0gKHN0cmluZykgPT4ge1xuICAgIC8vIHNvbHV0aW9uOiBodHRwczovL3d3dy5mcmVlY29kZWNhbXAub3JnL25ld3MvaG93LXRvLWNhcGl0YWxpemUtd29yZHMtaW4tamF2YXNjcmlwdC9cbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyheXFx3ezF9KXwoXFxzK1xcd3sxfSkvZywgbGV0dGVyID0+IGxldHRlci50b1VwcGVyQ2FzZSgpKTtcbn1cblxuY29uc3QgbG9hZFdlYXRoZXJEYXRhID0gKHdlYXRoZXJPYmosIHVuaXRzKSA9PntcbiAgICBsZXQgZGVncmVlcyA9Jyc7XG4gICAgbGV0IHNwZWVkID0gJyc7XG4gICAgaWYgKHVuaXRzID09J21ldHJpYycpe1xuICAgICAgICBkZWdyZWVzPSfCsEMnO1xuICAgICAgICBzcGVlZD0na20vaCc7XG4gICAgfSBlbHNlIGlmICh1bml0cyA9PSdpbXBlcmlhbCcpe1xuICAgICAgICBkZWdyZWVzPSfCsEYnO1xuICAgICAgICBzcGVlZD0nbXBoJztcbiAgICB9XG5cbiAgICAvLyBDdXJyIFdlYXRoZXI6IGxlZnQgc2lkZVxuICAgIGNvbnN0IHdlYXRoZXJMb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3ZWF0aGVyTG9jYXRpb24nKTtcbiAgICBjb25zdCB3ZWF0aGVyRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd2VhdGhlckRlc2NyaXB0aW9uJyk7XG4gICAgY29uc3Qgd2VhdGhlclRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd2VhdGhlclRlbXAnKTtcbiAgICBjb25zdCB3ZWF0aGVySWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3ZWF0aGVySWNvbicpO1xuICAgIFxuICAgIHdlYXRoZXJMb2NhdGlvbi5pbm5lckhUTUwgPSBgJHt3ZWF0aGVyT2JqLmNpdHl9LCAke3dlYXRoZXJPYmouY291bnRyeX1gO1xuICAgIC8vIHdlYXRoZXJEZXNjcmlwdGlvbi5pbm5lckhUTUwgPSBgJHt3ZWF0aGVyT2JqLmRlc2NyaXB0aW9ufWA7XG4gICAgd2VhdGhlckRlc2NyaXB0aW9uLmlubmVySFRNTCA9IGAke2NhcGl0YWxpemVTdHIod2VhdGhlck9iai5kZXNjcmlwdGlvbil9YDtcbiAgICB3ZWF0aGVyVGVtcC5pbm5lckhUTUwgPSBgJHtNYXRoLnJvdW5kKHdlYXRoZXJPYmoudGVtcCl9ICR7ZGVncmVlc31gO1xuICAgIHdlYXRoZXJJY29uLnNyYyA9IGBodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke3dlYXRoZXJPYmouaWNvbkNvZGV9QDR4LnBuZ2A7XG4gICAgXG4gICAgLy8gQ3VyciBXZWF0aGVyOiByaWdodCBzaWRlXG4gICAgY29uc3QgZmVlbHNMaWtlVGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmZWVsc0xpa2VUZW1wJyk7XG4gICAgY29uc3QgaHVtaWRpdHlUZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2h1bWlkaXR5VGVtcCcpO1xuICAgIGNvbnN0IHdpbmRTcGVlZFRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd2luZFNwZWVkVGVtcCcpO1xuICAgIGZlZWxzTGlrZVRlbXAuaW5uZXJIVE1MID0gYCR7TWF0aC5yb3VuZCh3ZWF0aGVyT2JqLmZlZWxzTGlrZSl9ICR7ZGVncmVlc31gO1xuICAgIGh1bWlkaXR5VGVtcC5pbm5lckhUTUwgPSBgJHt3ZWF0aGVyT2JqLmh1bWlkaXR5fSVgO1xuICAgIHdpbmRTcGVlZFRlbXAuaW5uZXJIVE1MID0gYCR7TWF0aC5yb3VuZCh3ZWF0aGVyT2JqLndpbmRTcGVlZCAqIDEwKSAvIDEwfSAke3NwZWVkfWA7XG5cbiAgICAvLyBkYWlseSB3ZWF0aGVyOlxuICAgIC8vIGNvbnZlcnQgdGltZXN0YW1wIHRvIGRheSBzb2x1dGlvbjogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzU2MDcwOTE2XG4gICAgY29uc3QgYWxsRGF5cz0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddO1xuICAgIHdlYXRoZXJPYmouZGFpbHkuZm9yRWFjaCgoZGF5LGluZGV4KT0+e1xuICAgICAgICBjb25zb2xlLmxvZyhkYXkpO1xuICAgICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRheS5kdCk7XG4gICAgICAgIGxldCBkYXRlVGltZSA9IG5ldyBEYXRlKGRheS5kdCoxMDAwKTsgLy9nZXQgZGF0ZVRpbWVcbiAgICAgICAgbGV0IGNvbnZEYXlOYW1lID0gYWxsRGF5c1tkYXRlVGltZS5nZXREYXkoKV07XG4gICAgICAgIGNvbnNvbGUubG9nKGNvbnZEYXlOYW1lKTtcblxuICAgICAgICBjb25zdCBkYXlOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2RheSR7aW5kZXh9TmFtZWApO1xuICAgICAgICBjb25zdCBkYXlIaWdoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2RheSR7aW5kZXh9SGlnaGApO1xuICAgICAgICBjb25zdCBkYXlMb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZGF5JHtpbmRleH1Mb3dgKTtcbiAgICAgICAgY29uc3QgZGF5SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNkYXkke2luZGV4fUljb25gKTtcbiAgICAgICAgZGF5TmFtZS5pbm5lckhUTUwgPSBgJHtjb252RGF5TmFtZX1gO1xuICAgICAgICBkYXlIaWdoLmlubmVySFRNTCA9IGAke01hdGgucm91bmQoZGF5LnRlbXAubWF4KX0gJHtkZWdyZWVzfWA7XG4gICAgICAgIGRheUxvdy5pbm5lckhUTUwgPSBgJHtNYXRoLnJvdW5kKGRheS50ZW1wLm1pbil9ICR7ZGVncmVlc31gO1xuICAgICAgICBkYXlJY29uLnNyYyA9IGBodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke2RheS53ZWF0aGVyWzBdLmljb259QDJ4LnBuZ2A7XG4gICAgfSk7XG59XG5cbmV4cG9ydCB7bG9hZFdlYXRoZXJEYXRhfSJdLCJzb3VyY2VSb290IjoiIn0=