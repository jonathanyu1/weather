(()=>{"use strict";(()=>{let e="metric",t="toronto";const o=document.querySelector("#searchInput"),n=document.querySelector("#btnSearch"),r=document.querySelector("#btnChangeUnit"),c=async o=>{try{let n=await(async e=>{try{const t=await fetch(e,{mode:"cors"}),o=await t.json();console.log(o);const n={};return n.city=o.name,n.country=o.sys.country,n.lat=o.coord.lat,n.lon=o.coord.lon,console.log("currentDataObj"),n}catch(e){console.log("error: "+e)}})(`https://api.openweathermap.org/data/2.5/weather?q=${o}&units=${e}&APPID=107629179ef66f70931a8e42d89f5115`),r=await(async e=>{try{const t=await fetch(e,{mode:"cors"}),o=await t.json();console.log(o);const n={};return n.temp=o.current.temp,n.description=o.current.weather[0].description,n.iconCode=o.current.weather[0].icon,n.feelsLike=o.current.feels_like,n.humidity=o.current.humidity,n.windSpeed=o.current.wind_speed,n.daily=o.daily,n.daily.shift(),n}catch(e){console.log("error: "+e)}})(`https://api.openweathermap.org/data/2.5/onecall?lat=${n.lat}&lon=${n.lon}&units=${e}&appid=107629179ef66f70931a8e42d89f5115`);console.log(n),console.log(r),r.city=n.city,r.country=n.country,console.log(r),t=n.city,((e,t)=>{let o="",n="";"metric"==t?(o="°C",n="km/h"):"imperial"==t&&(o="°F",n="mph");const r=document.querySelector("#weatherLocation"),c=document.querySelector("#weatherDescription"),a=document.querySelector("#weatherTemp"),i=document.querySelector("#weatherIcon");var l;r.innerHTML=`${e.city}, ${e.country}`,c.innerHTML=`${l=e.description,l.replace(/(^\w{1})|(\s+\w{1})/g,(e=>e.toUpperCase()))}`,a.innerHTML=`${Math.round(e.temp)} ${o}`,i.src=`http://openweathermap.org/img/wn/${e.iconCode}@2x.png`;const d=document.querySelector("#feelsLikeTemp"),u=document.querySelector("#humidityTemp"),s=document.querySelector("#windSpeedTemp");d.innerHTML=`${Math.round(e.feelsLike)} ${o}`,u.innerHTML=`${e.humidity}%`,s.innerHTML=`${Math.round(10*e.windSpeed)/10} ${n}`;const y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];e.daily.forEach(((e,t)=>{console.log(e),console.log(t),console.log(e.dt);let n=new Date(1e3*e.dt),r=y[n.getDay()];console.log(r);const c=document.querySelector(`#day${t}Name`),a=document.querySelector(`#day${t}High`),i=document.querySelector(`#day${t}Low`),l=document.querySelector(`#day${t}Icon`);c.innerHTML=`${r}`,a.innerHTML=`${Math.round(e.temp.max)} ${o}`,i.innerHTML=`${Math.round(e.temp.min)} ${o}`,l.src=`http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}))})(r,e)}catch(e){console.log("error: "+e)}};c("toronto"),n.addEventListener("click",(()=>{console.log(o.value),c(o.value),o.value=""})),o.addEventListener("keypress",(function(e){"Enter"===e.key&&(c(o.value),o.value="")})),r.addEventListener("click",(function(o){const n=document.querySelector("#metricLabel"),r=document.querySelector("#imperialLabel");"metric"==e?(e="imperial",n.style.fontWeight="normal",r.style.fontWeight="bold"):"imperial"==e&&(e="metric",n.style.fontWeight="bold",r.style.fontWeight="normal"),c(t)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvYXBpLmpzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvZG9tLmpzIl0sIm5hbWVzIjpbInVuaXRzIiwiY3VyckNpdHkiLCJzZWFyY2hJbnB1dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNlYXJjaEJ0biIsImJ0bkNoYW5nZVVuaXQiLCJnZXREYXRhIiwiYXN5bmMiLCJzZWFyY2hWYWx1ZSIsImN1cnJlbnREYXRhIiwidXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1vZGUiLCJqc29uIiwiY29uc29sZSIsImxvZyIsImN1cnJlbnREYXRhT2JqIiwiY2l0eSIsIm5hbWUiLCJjb3VudHJ5Iiwic3lzIiwibGF0IiwiY29vcmQiLCJsb24iLCJlcnJvciIsImN1cnJlbnRXZWF0aGVyQVBJIiwib25lQ2FsbERhdGEiLCJvbmVDYWxsRGF0YU9iaiIsInRlbXAiLCJjdXJyZW50IiwiZGVzY3JpcHRpb24iLCJ3ZWF0aGVyIiwiaWNvbkNvZGUiLCJpY29uIiwiZmVlbHNMaWtlIiwiZmVlbHNfbGlrZSIsImh1bWlkaXR5Iiwid2luZFNwZWVkIiwid2luZF9zcGVlZCIsImRhaWx5Iiwic2hpZnQiLCJvbmVDYWxsQVBJIiwid2VhdGhlck9iaiIsImRlZ3JlZXMiLCJzcGVlZCIsIndlYXRoZXJMb2NhdGlvbiIsIndlYXRoZXJEZXNjcmlwdGlvbiIsIndlYXRoZXJUZW1wIiwid2VhdGhlckljb24iLCJzdHJpbmciLCJpbm5lckhUTUwiLCJyZXBsYWNlIiwibGV0dGVyIiwidG9VcHBlckNhc2UiLCJNYXRoIiwicm91bmQiLCJzcmMiLCJmZWVsc0xpa2VUZW1wIiwiaHVtaWRpdHlUZW1wIiwid2luZFNwZWVkVGVtcCIsImFsbERheXMiLCJmb3JFYWNoIiwiZGF5IiwiaW5kZXgiLCJkdCIsImRhdGVUaW1lIiwiRGF0ZSIsImNvbnZEYXlOYW1lIiwiZ2V0RGF5IiwiZGF5TmFtZSIsImRheUhpZ2giLCJkYXlMb3ciLCJkYXlJY29uIiwibWF4IiwibWluIiwibG9hZFdlYXRoZXJEYXRhIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwiZSIsImtleSIsIm1ldHJpY0xhYmVsIiwiaW1wZXJpYWxMYWJlbCIsInN0eWxlIiwiZm9udFdlaWdodCJdLCJtYXBwaW5ncyI6Im1CQUl1QixNQUNuQixJQUFJQSxFQUFRLFNBQ1JDLEVBQVcsVUFDZixNQUFNQyxFQUFjQyxTQUFTQyxjQUFjLGdCQUNyQ0MsRUFBWUYsU0FBU0MsY0FBYyxjQUNuQ0UsRUFBZ0JILFNBQVNDLGNBQWMsa0JBRXZDRyxFQUFVQyxNQUFPQyxJQUNuQixJQUNJLElBQUlDLE9DYlVGLE9BQU9HLElBQzdCLElBQ0ksTUFBTUMsUUFBaUJDLE1BQU1GLEVBQUssQ0FBQ0csS0FBTSxTQUNuQ0osUUFBb0JFLEVBQVNHLE9BQ25DQyxRQUFRQyxJQUFJUCxHQUNaLE1BQU1RLEVBQWlCLEdBTXZCLE9BTEFBLEVBQWVDLEtBQU9ULEVBQVlVLEtBQ2xDRixFQUFlRyxRQUFVWCxFQUFZWSxJQUFJRCxRQUN6Q0gsRUFBZUssSUFBTWIsRUFBWWMsTUFBTUQsSUFDdkNMLEVBQWVPLElBQU1mLEVBQVljLE1BQU1DLElBQ3ZDVCxRQUFRQyxJQUFJLGtCQUNMQyxFQUNULE1BQU9RLEdBQ0xWLFFBQVFDLElBQUksVUFBVVMsS0RBTUMsQ0FBa0IscURBQXFEbEIsV0FBcUJULDRDQUNoSDRCLE9DSUdwQixPQUFPRyxJQUN0QixJQUNJLE1BQU1DLFFBQWlCQyxNQUFNRixFQUFLLENBQUNHLEtBQU0sU0FDbkNjLFFBQW9CaEIsRUFBU0csT0FDbkNDLFFBQVFDLElBQUlXLEdBQ1osTUFBTUMsRUFBaUIsR0FXdkIsT0FWQUEsRUFBZUMsS0FBT0YsRUFBWUcsUUFBUUQsS0FDMUNELEVBQWVHLFlBQWNKLEVBQVlHLFFBQVFFLFFBQVEsR0FBR0QsWUFDNURILEVBQWVLLFNBQVdOLEVBQVlHLFFBQVFFLFFBQVEsR0FBR0UsS0FDekROLEVBQWVP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RUFBRUMsTUFDRjFFLEVBQVFMLEVBQVk2RSxPQUNwQjdFLEVBQVk2RSxNQUFNLE9BSTFCekUsRUFBY3dFLGlCQUFpQixTQUFTLFNBQVNFLEdBRTdDLE1BQU1FLEVBQWMvRSxTQUFTQyxjQUFjLGdCQUNyQytFLEVBQWdCaEYsU0FBU0MsY0FBYyxrQkFDbEMsVUFBUEosR0FDQUEsRUFBUSxXQUNSa0YsRUFBWUUsTUFBTUMsV0FBVyxTQUM3QkYsRUFBY0MsTUFBTUMsV0FBVyxRQUNqQixZQUFQckYsSUFDUEEsRUFBUSxTQUNSa0YsRUFBWUUsTUFBTUMsV0FBVyxPQUM3QkYsRUFBY0MsTUFBTUMsV0FBVyxVQUduQzlFLEVBQVFOLE9BNURPLEkiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Y3VycmVudFdlYXRoZXJBUEksIG9uZUNhbGxBUEkgfSBmcm9tICcuL2FwaS5qcyc7XG5pbXBvcnQge2xvYWRXZWF0aGVyRGF0YX0gZnJvbSAnLi9kb20uanMnO1xuXG5cbmNvbnN0IHNpdGVDb250cm9sbGVyID0gKCgpPT57XG4gICAgbGV0IHVuaXRzID0gJ21ldHJpYyc7XG4gICAgbGV0IGN1cnJDaXR5ID0gJ3Rvcm9udG8nO1xuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlYXJjaElucHV0Jyk7XG4gICAgY29uc3Qgc2VhcmNoQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J0blNlYXJjaCcpO1xuICAgIGNvbnN0IGJ0bkNoYW5nZVVuaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuQ2hhbmdlVW5pdCcpO1xuXG4gICAgY29uc3QgZ2V0RGF0YSA9IGFzeW5jIChzZWFyY2hWYWx1ZSkgPT57XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGxldCBjdXJyZW50RGF0YSA9IGF3YWl0IGN1cnJlbnRXZWF0aGVyQVBJKGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9xPSR7c2VhcmNoVmFsdWV9JnVuaXRzPSR7dW5pdHN9JkFQUElEPTEwNzYyOTE3OWVmNjZmNzA5MzFhOGU0MmQ4OWY1MTE1YCk7XG4gICAgICAgICAgICBsZXQgb25lQ2FsbERhdGEgPSBhd2FpdCBvbmVDYWxsQVBJKGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvb25lY2FsbD9sYXQ9JHtjdXJyZW50RGF0YS5sYXR9Jmxvbj0ke2N1cnJlbnREYXRhLmxvbn0mdW5pdHM9JHt1bml0c30mYXBwaWQ9MTA3NjI5MTc5ZWY2NmY3MDkzMWE4ZTQyZDg5ZjUxMTVgKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnREYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG9uZUNhbGxEYXRhKTtcbiAgICAgICAgICAgIG9uZUNhbGxEYXRhLmNpdHkgPSBjdXJyZW50RGF0YS5jaXR5O1xuICAgICAgICAgICAgb25lQ2FsbERhdGEuY291bnRyeSA9IGN1cnJlbnREYXRhLmNvdW50cnk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhvbmVDYWxsRGF0YSk7XG4gICAgICAgICAgICBjdXJyQ2l0eSA9IGN1cnJlbnREYXRhLmNpdHk7XG4gICAgICAgICAgICBsb2FkV2VhdGhlckRhdGEob25lQ2FsbERhdGEsIHVuaXRzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3Ipe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOiAnK2Vycm9yKTtcbiAgICAgICAgICAgIC8vIGFkZCBlcnJvciBtZXNzYWdlIHVuZGVyIHNlYXJjaCBiYXJcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cbiAgICAvLyBpbml0aWFsaXplIHNpdGUgd2l0aCAndG9yb250bycgYXMgYmFzZSBjaXR5XG5cbiAgICBjb25zdCBzaXRlSW5pdCA9ICgoKT0+e1xuICAgICAgICBnZXREYXRhKCd0b3JvbnRvJyk7XG4gICAgfSkoKTtcbiAgICBcbiAgICAvLyBzZWFyY2ggYmFyIGV2ZW50IGxpc3RlbmVyc1xuXG4gICAgc2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgY29uc29sZS5sb2coc2VhcmNoSW5wdXQudmFsdWUpO1xuICAgICAgICBnZXREYXRhKHNlYXJjaElucHV0LnZhbHVlKTtcbiAgICAgICAgc2VhcmNoSW5wdXQudmFsdWU9Jyc7XG4gICAgfSk7XG5cbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKXtcbiAgICAgICAgaWYgKGUua2V5ID09PSdFbnRlcicpe1xuICAgICAgICAgICAgZ2V0RGF0YShzZWFyY2hJbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICBzZWFyY2hJbnB1dC52YWx1ZT0nJztcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgYnRuQ2hhbmdlVW5pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuICAgICAgICAvLyBjaGFuZ2UgdG8gb3Bwb3NpdGUgdW5pdFxuICAgICAgICBjb25zdCBtZXRyaWNMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXRyaWNMYWJlbCcpO1xuICAgICAgICBjb25zdCBpbXBlcmlhbExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ltcGVyaWFsTGFiZWwnKTtcbiAgICAgICAgaWYgKHVuaXRzPT0nbWV0cmljJyl7XG4gICAgICAgICAgICB1bml0cyA9ICdpbXBlcmlhbCc7XG4gICAgICAgICAgICBtZXRyaWNMYWJlbC5zdHlsZS5mb250V2VpZ2h0PSdub3JtYWwnO1xuICAgICAgICAgICAgaW1wZXJpYWxMYWJlbC5zdHlsZS5mb250V2VpZ2h0PSdib2xkJztcbiAgICAgICAgfSBlbHNlIGlmICh1bml0cz09J2ltcGVyaWFsJyl7XG4gICAgICAgICAgICB1bml0cyA9ICdtZXRyaWMnO1xuICAgICAgICAgICAgbWV0cmljTGFiZWwuc3R5bGUuZm9udFdlaWdodD0nYm9sZCc7XG4gICAgICAgICAgICBpbXBlcmlhbExhYmVsLnN0eWxlLmZvbnRXZWlnaHQ9J25vcm1hbCc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2FsbCBnZXREYXRhIHVzaW5nIGN1cnJDaXR5IHRvIHJlLWRpc3BsYXkgaW4gbmV3IHVuaXRzXG4gICAgICAgIGdldERhdGEoY3VyckNpdHkpO1xuICAgIH0pO1xuXG59KSgpO1xuXG4iLCJjb25zdCBjdXJyZW50V2VhdGhlckFQSSA9IGFzeW5jICh1cmwpID0+IHtcbiAgICB0cnl7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7bW9kZTogJ2NvcnMnfSk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50RGF0YSk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRhT2JqID0ge307XG4gICAgICAgIGN1cnJlbnREYXRhT2JqLmNpdHkgPSBjdXJyZW50RGF0YS5uYW1lO1xuICAgICAgICBjdXJyZW50RGF0YU9iai5jb3VudHJ5ID0gY3VycmVudERhdGEuc3lzLmNvdW50cnk7XG4gICAgICAgIGN1cnJlbnREYXRhT2JqLmxhdCA9IGN1cnJlbnREYXRhLmNvb3JkLmxhdDtcbiAgICAgICAgY3VycmVudERhdGFPYmoubG9uID0gY3VycmVudERhdGEuY29vcmQubG9uO1xuICAgICAgICBjb25zb2xlLmxvZygnY3VycmVudERhdGFPYmonKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRhT2JqO1xuICAgIH0gY2F0Y2ggKGVycm9yKXtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOiAnK2Vycm9yKTtcbiAgICAgICAgLy8gc2hvdyBlcnJvciBtZXNzYWdlIG9uXG4gICAgfVxufVxuXG5jb25zdCBvbmVDYWxsQVBJID0gYXN5bmMgKHVybCkgPT57XG4gICAgdHJ5e1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge21vZGU6ICdjb3JzJ30pO1xuICAgICAgICBjb25zdCBvbmVDYWxsRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc29sZS5sb2cob25lQ2FsbERhdGEpO1xuICAgICAgICBjb25zdCBvbmVDYWxsRGF0YU9iaiA9IHt9O1xuICAgICAgICBvbmVDYWxsRGF0YU9iai50ZW1wID0gb25lQ2FsbERhdGEuY3VycmVudC50ZW1wO1xuICAgICAgICBvbmVDYWxsRGF0YU9iai5kZXNjcmlwdGlvbiA9IG9uZUNhbGxEYXRhLmN1cnJlbnQud2VhdGhlclswXS5kZXNjcmlwdGlvbjtcbiAgICAgICAgb25lQ2FsbERhdGFPYmouaWNvbkNvZGUgPSBvbmVDYWxsRGF0YS5jdXJyZW50LndlYXRoZXJbMF0uaWNvbjtcbiAgICAgICAgb25lQ2FsbERhdGFPYmouZmVlbHNMaWtlID0gb25lQ2FsbERhdGEuY3VycmVudC5mZWVsc19saWtlO1xuICAgICAgICBvbmVDYWxsRGF0YU9iai5odW1pZGl0eSA9IG9uZUNhbGxEYXRhLmN1cnJlbnQuaHVtaWRpdHk7XG4gICAgICAgIG9uZUNhbGxEYXRhT2JqLndpbmRTcGVlZCA9IG9uZUNhbGxEYXRhLmN1cnJlbnQud2luZF9zcGVlZDtcbiAgICAgICAgLy8gcmVtZW1iZXIgdG8gaW5jbHVkZSB2YWx1ZXMgZm9yIGRhaWx5IHN0dWZmXG4gICAgICAgIG9uZUNhbGxEYXRhT2JqLmRhaWx5ID0gb25lQ2FsbERhdGEuZGFpbHk7XG4gICAgICAgIC8vIHJlbW92ZXMgdGhlIGZpcnN0IGRheSBmcm9tIGRhaWx5LCB3aGljaCBpcyB0b2RheSdzIHdlYXRoZXJcbiAgICAgICAgb25lQ2FsbERhdGFPYmouZGFpbHkuc2hpZnQoKTtcbiAgICAgICAgcmV0dXJuIG9uZUNhbGxEYXRhT2JqO1xuICAgIH1jYXRjaCAoZXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3I6ICcrZXJyb3IpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgY3VycmVudFdlYXRoZXJBUEksIG9uZUNhbGxBUEl9IiwiY29uc3QgY2FwaXRhbGl6ZVN0ciA9IChzdHJpbmcpID0+IHtcbiAgICAvLyBzb2x1dGlvbjogaHR0cHM6Ly93d3cuZnJlZWNvZGVjYW1wLm9yZy9uZXdzL2hvdy10by1jYXBpdGFsaXplLXdvcmRzLWluLWphdmFzY3JpcHQvXG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oXlxcd3sxfSl8KFxccytcXHd7MX0pL2csIGxldHRlciA9PiBsZXR0ZXIudG9VcHBlckNhc2UoKSk7XG59XG5cbmNvbnN0IGxvYWRXZWF0aGVyRGF0YSA9ICh3ZWF0aGVyT2JqLCB1bml0cykgPT57XG4gICAgbGV0IGRlZ3JlZXMgPScnO1xuICAgIGxldCBzcGVlZCA9ICcnO1xuICAgIGlmICh1bml0cyA9PSdtZXRyaWMnKXtcbiAgICAgICAgZGVncmVlcz0nwrBDJztcbiAgICAgICAgc3BlZWQ9J2ttL2gnO1xuICAgIH0gZWxzZSBpZiAodW5pdHMgPT0naW1wZXJpYWwnKXtcbiAgICAgICAgZGVncmVlcz0nwrBGJztcbiAgICAgICAgc3BlZWQ9J21waCc7XG4gICAgfVxuXG4gICAgLy8gQ3VyciBXZWF0aGVyOiBsZWZ0IHNpZGVcbiAgICBjb25zdCB3ZWF0aGVyTG9jYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd2VhdGhlckxvY2F0aW9uJyk7XG4gICAgY29uc3Qgd2VhdGhlckRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dlYXRoZXJEZXNjcmlwdGlvbicpO1xuICAgIGNvbnN0IHdlYXRoZXJUZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dlYXRoZXJUZW1wJyk7XG4gICAgY29uc3Qgd2VhdGhlckljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd2VhdGhlckljb24nKTtcbiAgICBcbiAgICB3ZWF0aGVyTG9jYXRpb24uaW5uZXJIVE1MID0gYCR7d2VhdGhlck9iai5jaXR5fSwgJHt3ZWF0aGVyT2JqLmNvdW50cnl9YDtcbiAgICAvLyB3ZWF0aGVyRGVzY3JpcHRpb24uaW5uZXJIVE1MID0gYCR7d2VhdGhlck9iai5kZXNjcmlwdGlvbn1gO1xuICAgIHdlYXRoZXJEZXNjcmlwdGlvbi5pbm5lckhUTUwgPSBgJHtjYXBpdGFsaXplU3RyKHdlYXRoZXJPYmouZGVzY3JpcHRpb24pfWA7XG4gICAgd2VhdGhlclRlbXAuaW5uZXJIVE1MID0gYCR7TWF0aC5yb3VuZCh3ZWF0aGVyT2JqLnRlbXApfSAke2RlZ3JlZXN9YDtcbiAgICB3ZWF0aGVySWNvbi5zcmMgPSBgaHR0cDovL29wZW53ZWF0aGVybWFwLm9yZy9pbWcvd24vJHt3ZWF0aGVyT2JqLmljb25Db2RlfUAyeC5wbmdgO1xuICAgIFxuICAgIC8vIEN1cnIgV2VhdGhlcjogcmlnaHQgc2lkZVxuICAgIGNvbnN0IGZlZWxzTGlrZVRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmVlbHNMaWtlVGVtcCcpO1xuICAgIGNvbnN0IGh1bWlkaXR5VGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNodW1pZGl0eVRlbXAnKTtcbiAgICBjb25zdCB3aW5kU3BlZWRUZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dpbmRTcGVlZFRlbXAnKTtcbiAgICBmZWVsc0xpa2VUZW1wLmlubmVySFRNTCA9IGAke01hdGgucm91bmQod2VhdGhlck9iai5mZWVsc0xpa2UpfSAke2RlZ3JlZXN9YDtcbiAgICBodW1pZGl0eVRlbXAuaW5uZXJIVE1MID0gYCR7d2VhdGhlck9iai5odW1pZGl0eX0lYDtcbiAgICB3aW5kU3BlZWRUZW1wLmlubmVySFRNTCA9IGAke01hdGgucm91bmQod2VhdGhlck9iai53aW5kU3BlZWQgKiAxMCkgLyAxMH0gJHtzcGVlZH1gO1xuXG4gICAgLy8gZGFpbHkgd2VhdGhlcjpcbiAgICAvLyBjb252ZXJ0IHRpbWVzdGFtcCB0byBkYXkgc29sdXRpb246IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81NjA3MDkxNlxuICAgIGNvbnN0IGFsbERheXM9IFsnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknXTtcbiAgICB3ZWF0aGVyT2JqLmRhaWx5LmZvckVhY2goKGRheSxpbmRleCk9PntcbiAgICAgICAgY29uc29sZS5sb2coZGF5KTtcbiAgICAgICAgY29uc29sZS5sb2coaW5kZXgpO1xuICAgICAgICBjb25zb2xlLmxvZyhkYXkuZHQpO1xuICAgICAgICBsZXQgZGF0ZVRpbWUgPSBuZXcgRGF0ZShkYXkuZHQqMTAwMCk7IC8vZ2V0IGRhdGVUaW1lXG4gICAgICAgIGxldCBjb252RGF5TmFtZSA9IGFsbERheXNbZGF0ZVRpbWUuZ2V0RGF5KCldO1xuICAgICAgICBjb25zb2xlLmxvZyhjb252RGF5TmFtZSk7XG5cbiAgICAgICAgY29uc3QgZGF5TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNkYXkke2luZGV4fU5hbWVgKTtcbiAgICAgICAgY29uc3QgZGF5SGlnaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNkYXkke2luZGV4fUhpZ2hgKTtcbiAgICAgICAgY29uc3QgZGF5TG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2RheSR7aW5kZXh9TG93YCk7XG4gICAgICAgIGNvbnN0IGRheUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZGF5JHtpbmRleH1JY29uYCk7XG4gICAgICAgIGRheU5hbWUuaW5uZXJIVE1MID0gYCR7Y29udkRheU5hbWV9YDtcbiAgICAgICAgZGF5SGlnaC5pbm5lckhUTUwgPSBgJHtNYXRoLnJvdW5kKGRheS50ZW1wLm1heCl9ICR7ZGVncmVlc31gO1xuICAgICAgICBkYXlMb3cuaW5uZXJIVE1MID0gYCR7TWF0aC5yb3VuZChkYXkudGVtcC5taW4pfSAke2RlZ3JlZXN9YDtcbiAgICAgICAgZGF5SWNvbi5zcmMgPSBgaHR0cDovL29wZW53ZWF0aGVybWFwLm9yZy9pbWcvd24vJHtkYXkud2VhdGhlclswXS5pY29ufUAyeC5wbmdgO1xuICAgIH0pO1xufVxuXG5leHBvcnQge2xvYWRXZWF0aGVyRGF0YX0iXSwic291cmNlUm9vdCI6IiJ9